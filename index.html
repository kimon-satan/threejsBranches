<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>Blob</title>
		<style>
			body { margin: 0; background-color: black }
			canvas { width: 100%; height: 100% }
		</style>


		<script id="vertexShader" type="x-shader/x-vertex">

		attribute vec2 miter;
		attribute float len;
		attribute float line_dist;
		attribute vec3 color;

		uniform float thickness;

		varying float line_d;
		varying float dist;
		varying vec3 o_color;

		void main() {
		    //push the point along its normal by half thickness
		    vec2 p =  position.xy  +  miter  * (thickness/len);
		    gl_Position = vec4(p.xy, 0.0, 1.0);
		    dist = sign(len);
		    line_d = line_dist;
		    o_color = color;
		    //gl_PointSize = 5.0;
		}
		</script>

		<script id="fragmentShader" type="x-shader/x-fragment">
			#ifdef GL_ES
				precision highp float;
			#endif


			uniform float time;
			uniform vec2 mouse;

			varying float dist;
			varying float line_d;
			varying vec3 o_color;

			float PI  = 3.141592653589793;
			float TWO_PI = 6.283185307179586;

			///////////////////////////////////HELPERS///////////////////////////////////

	
			void main()	{
				

				float f = 0.5 + cos(line_d * TWO_PI + PI) * 0.5;
				float d = pow(dist, 2.5);
				vec3 col1 = vec3(1.0,0.45,0.40);
				vec3 col2 = vec3(0.2,0.75,0.25);
				float v = 0.5 + sin(line_d * TWO_PI * 8.0) * 0.5;
				vec3 m = mix(col1, col2, v);
				gl_FragColor = vec4( m * (1.0 - pow(d,f)),1.0);
				
			}

		</script>

	</head>
	<body>
		<script type="text/javascript" src="perlin.js"></script>
		<script type="text/javascript" src="dat.gui.min.js"></script>
		<script src="three.min.js"></script>
		<script type="text/javascript" src="main.js"></script>
	</body>
</html>